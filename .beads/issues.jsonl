{"id":"mssg-08h","title":"URL paths in templates have escaped forward slashes","description":"## Problem\n\nWhen rendering templates, URL paths like `articles/2025-12-15-rust-error-handling.html` are being escaped to `articles\u0026#x2f;2025-12-15-rust-error-handling.html`.\n\nThe forward slash (`/`) is being converted to `\u0026#x2f;` by minijinja's HTML auto-escaping.\n\n## Root Cause\n\nIn `template.rs`, the `filename` field of `ContentItem` is passed as a regular `String`. Minijinja's auto-escaping then escapes the forward slash in HTML attribute contexts (following OWASP XSS prevention recommendations).\n\n## Solution\n\nAdd a `url` filter to the minijinja environment that marks URL paths as safe, bypassing auto-escaping for path separators while still being safe for HTML contexts.\n\nUse `Value::from_safe_string()` to mark the result as pre-escaped.\n\n## Affected Code\n\n- `src/template.rs:44-49` and `src/template.rs:69-74` - where filename is constructed\n- `src/template.rs:17-21` and `src/template.rs:26-29` - where environment is created\n\n## Test Case\n\nTemplates with `href=\"/{{ item.filename }}\"` render as `href=\"/articles\u0026#x2f;my-post.html\"` instead of `href=\"/articles/my-post.html\"`","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-23T16:13:41.564337+01:00","updated_at":"2025-12-23T17:34:00.478006+01:00","closed_at":"2025-12-23T17:34:00.478006+01:00","close_reason":"Added url filter to mark URL paths as safe. Templates should use {{ item.filename | url }} to prevent forward slash escaping."}
{"id":"mssg-1y8","title":"Add verify task to mise.toml for edit-test loop","description":"Add a 'verify' task that runs both linting and tests in sequence. This enforces the edit-test loop pattern recommended for AI-assisted development.\n\nImplementation:\n- Add [tasks.verify] to mise.toml\n- Run: cargo clippy -- -D warnings \u0026\u0026 cargo test\n- Update CLAUDE.md to reference the new task","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:53.806977+01:00","updated_at":"2025-12-22T21:44:12.62818+01:00","closed_at":"2025-12-22T21:44:12.62818+01:00","close_reason":"Closed"}
{"id":"mssg-559","title":"Refactor watch logic to allow testing of watched paths","description":"Extract the logic for determining which paths to watch into a separate function so we can verify that the config file is included in the watch list via unit tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T21:47:09.264451+01:00","updated_at":"2025-12-22T17:31:46.126956+01:00","closed_at":"2025-12-22T17:31:46.126956+01:00","close_reason":"Function extracted and test added in commit b073b6d"}
{"id":"mssg-6ii","title":"Enable syntax highlighting","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:20:35.711852+01:00","updated_at":"2025-12-22T20:15:01.665669+01:00","closed_at":"2025-12-22T20:15:01.665669+01:00","close_reason":"Closed"}
{"id":"mssg-6xl","title":"Syntax highlighter parsing bug: stops at first \u003e closing pre tag","description":"The highlight_html parser looks for the first '\u003e' to find the end of the opening tag, but this stops at '\u003cpre\u003e' instead of '\u003ccode class=\"language-*\"\u003e'. Result: the \u003ccode...\u003e tag is fed into the highlighter as text content instead of being parsed as markup.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-22T21:07:06.067024+01:00","updated_at":"2025-12-22T21:10:27.072417+01:00","closed_at":"2025-12-22T21:10:27.072417+01:00","close_reason":"Fixed by adjusting tag parsing to skip \u003cpre\u003e and find the closing \u003e of \u003ccode\u003e tag"}
{"id":"mssg-9xx","title":"Pass all_content variable to templates for tags counting","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:20:54.487394+01:00","updated_at":"2025-12-22T19:02:40.838538+01:00","closed_at":"2025-12-22T19:02:40.838538+01:00","close_reason":"Closed"}
{"id":"mssg-dn7","title":"Add test coverage with cargo tarpaulin","description":"Add cargo tarpaulin for test coverage metrics to ensure AI-generated code is properly tested.\n\nImplementation:\n1. Add coverage task to mise.toml: cargo tarpaulin --out Html\n2. Document coverage workflow in CLAUDE.md\n3. Consider adding coverage threshold enforcement","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:54.184833+01:00","updated_at":"2025-12-22T21:46:54.492045+01:00","closed_at":"2025-12-22T21:46:54.492045+01:00","close_reason":"Closed"}
{"id":"mssg-gnk","title":"Add watch subcommand for live rebuilds","description":"Add marie-ssg watch command that monitors src/ and templates/ directories for changes and automatically triggers a rebuild when files change. This enables a faster development workflow without manually re-running build after each edit.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T11:31:09.788006+01:00","updated_at":"2025-12-20T20:56:49.231996+01:00","closed_at":"2025-12-20T20:56:49.231996+01:00","close_reason":"Implemented watch subcommand with fsevent for macOS"}
{"id":"mssg-mjq","title":"Watch mode doesn't reload on config file changes","description":"The watch mode currently only watches content_dir, template_dir, and static_dir. It should also watch the config file itself (e.g., site.toml) so that changes to configuration (like site title, etc.) trigger a rebuild.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T21:33:54.615373+01:00","updated_at":"2025-12-20T21:34:57.444389+01:00","closed_at":"2025-12-20T21:34:57.444389+01:00","close_reason":"Closed"}
{"id":"mssg-psj","title":"Expand CLAUDE.md with common development patterns","description":"Add concrete examples to CLAUDE.md for common development tasks. This helps AI assistants understand how to make changes correctly on the first attempt.\n\nPatterns to document:\n1. How to add a new content type\n2. How to add a new template variable\n3. How to add a new CLI flag\n4. Common error patterns and fixes\n\nEach pattern should include:\n- Step-by-step instructions\n- Relevant files to modify\n- Example code snippets","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:53.996085+01:00","updated_at":"2025-12-22T21:45:25.783918+01:00","closed_at":"2025-12-22T21:45:25.783918+01:00","close_reason":"Closed"}
{"id":"mssg-q51","title":"Fix watch mode not reloading templates","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T21:12:14.084903+01:00","updated_at":"2025-12-20T21:12:31.016775+01:00","closed_at":"2025-12-20T21:12:31.016775+01:00","close_reason":"Fixed by creating fresh template environment on each watch rebuild"}
{"id":"mssg-zku","title":"Syntax highlighter escaping bug: HTML entities rendered literally","description":"The markdown parser HTML-escapes content in code blocks (e.g., '\u003c' becomes '\u0026lt;'). The highlighter receives this escaped content and renders it literally, so code containing HTML shows '\u0026lt;' instead of '\u003c'.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-22T21:07:06.26345+01:00","updated_at":"2025-12-22T21:12:18.324863+01:00","closed_at":"2025-12-22T21:12:18.324863+01:00","close_reason":"Fixed by unescaping HTML entities (\u0026lt;, \u0026gt;, \u0026amp;, etc.) before passing code to the syntax highlighter","dependencies":[{"issue_id":"mssg-zku","depends_on_id":"mssg-6xl","type":"blocks","created_at":"2025-12-22T21:07:38.277527+01:00","created_by":"daemon"}]}
