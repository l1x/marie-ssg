{"id":"mssg-08h","title":"URL paths in templates have escaped forward slashes","description":"## Problem\n\nWhen rendering templates, URL paths like `articles/2025-12-15-rust-error-handling.html` are being escaped to `articles\u0026#x2f;2025-12-15-rust-error-handling.html`.\n\nThe forward slash (`/`) is being converted to `\u0026#x2f;` by minijinja's HTML auto-escaping.\n\n## Root Cause\n\nIn `template.rs`, the `filename` field of `ContentItem` is passed as a regular `String`. Minijinja's auto-escaping then escapes the forward slash in HTML attribute contexts (following OWASP XSS prevention recommendations).\n\n## Solution\n\nAdd a `url` filter to the minijinja environment that marks URL paths as safe, bypassing auto-escaping for path separators while still being safe for HTML contexts.\n\nUse `Value::from_safe_string()` to mark the result as pre-escaped.\n\n## Affected Code\n\n- `src/template.rs:44-49` and `src/template.rs:69-74` - where filename is constructed\n- `src/template.rs:17-21` and `src/template.rs:26-29` - where environment is created\n\n## Test Case\n\nTemplates with `href=\"/{{ item.filename }}\"` render as `href=\"/articles\u0026#x2f;my-post.html\"` instead of `href=\"/articles/my-post.html\"`","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-23T16:13:41.564337+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Added url filter to mark URL paths as safe. Templates should use {{ item.filename | url }} to prevent forward slash escaping.","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"mssg-1y8","title":"Add verify task to mise.toml for edit-test loop","description":"Add a 'verify' task that runs both linting and tests in sequence. This enforces the edit-test loop pattern recommended for AI-assisted development.\n\nImplementation:\n- Add [tasks.verify] to mise.toml\n- Run: cargo clippy -- -D warnings \u0026\u0026 cargo test\n- Update CLAUDE.md to reference the new task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:53.806977+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-22q","title":"INFO logging should show rendered and copied files","description":"## Summary\n\nWhen running a build, INFO level logging only shows summaries but not the individual files being rendered or copied. Users cannot see what work was actually done without enabling DEBUG logging.\n\n## Current Behavior\n\n```\ncontent::load 2 files in 50.09ms\nsitemap::write → sitemap.xml\nrss::write → feed.xml\nbuild::complete ✓\n```\n\nMissing from INFO output:\n- Which content files were rendered (e.g., `content::render article.md → out/article.html`)\n- Which static files were copied (e.g., `static::copy style.css → out/static/css/style.css`)\n- Which index files were generated (e.g., `index::render → out/articles/index.html`)\n\n## Expected Behavior\n\nINFO should show the actual work being done:\n\n```\nstatic::copy 12 files\ncontent::render src/content/articles/article.md → out/articles/2025-12-29-article.html\ncontent::render src/content/projects/nacre.md → out/projects/nacre.html\nindex::render → out/articles/index.html\nindex::render → out/projects/index.html\nindex::render → out/index.html\nsitemap::write → sitemap.xml\nrss::write → feed.xml\nbuild::complete ✓\n```\n\n## Files Generated (not visible in logs)\n\n```\nout/about/index.html\nout/articles/2025-12-29-agentic-project-management.html\nout/articles/index.html\nout/projects/index.html\nout/projects/nacre.html\nout/index.html\nout/static/css/style.css\nout/static/fonts/*.woff2\nout/static/img/*.png\nout/favicon.ico\nout/robots.txt\n```\n\n## Implementation\n\nPromote key DEBUG logs to INFO:\n- `content::render` for each rendered file\n- `index::render` for each index file\n- `static::copy` summary (count) or individual files","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T19:17:33.399964+01:00","created_by":"l1x","updated_at":"2026-01-03T19:53:32.622603+01:00","closed_at":"2026-01-03T19:53:32.622603+01:00","close_reason":"Fixed - INFO now shows static::copy count, content::render for each file, and index::render for each index page"}
{"id":"mssg-3ef","title":"Add cover field and flexible extra fields to ContentMeta","description":"Add a cover field to ContentMeta for cover images, and add a flexible extra HashMap using serde flatten to allow arbitrary custom fields in .meta.toml files.\n\n## Task Context\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003ctask\u003e\n  \u003cinstructions\u003e\n    \u003csummary\u003eAdd cover field and flexible extra fields to ContentMeta\u003c/summary\u003e\n    \u003cobjective\u003e\n      1. Add `cover: Option\u003cString\u003e` field with #[serde(default)] for cover images\n      2. Add `extra: HashMap\u003cString, serde_json::Value\u003e` with #[serde(default, flatten)] for arbitrary custom fields\n      3. Add serde_json dependency to Cargo.toml\n      4. Update existing tests and add new tests for both fields\n      5. Ensure extra fields are accessible in templates via meta.extra.fieldname\n    \u003c/objective\u003e\n    \u003cconstraints\u003e\n      - Maintain backward compatibility (all new fields must be optional with defaults)\n      - Run `mise run verify` before completing (lint + tests must pass)\n      - No clippy warnings allowed\n    \u003c/constraints\u003e\n  \u003c/instructions\u003e\n\n  \u003ccontext\u003e\n    \u003ctree root=\"src/\"\u003e\n        src/\n        ├── config.rs\n        ├── content.rs    # ContentMeta struct - PRIMARY EDIT TARGET\n        ├── error.rs\n        ├── main.rs\n        ├── output.rs\n        ├── rss.rs\n        ├── sitemap.rs\n        ├── syntax.rs\n        ├── template.rs   # References ContentMeta for template rendering\n        └── utils.rs\n    \u003c/tree\u003e\n\n    \u003cfiles\u003e\n      \u003cfile path=\"src/content.rs\" mode=\"full\" note=\"ContentMeta struct at lines 47-62, tests start at line 348\"/\u003e\n      \u003cfile path=\"src/template.rs\" mode=\"codemap\" note=\"Shows how meta is passed to templates\"/\u003e\n      \u003cfile path=\"Cargo.toml\" mode=\"full\" note=\"Add serde_json dependency\"/\u003e\n    \u003c/files\u003e\n  \u003c/context\u003e\n\n  \u003cimplementation_hints\u003e\n    \u003chint\u003eContentMeta struct is at src/content.rs:47-62\u003c/hint\u003e\n    \u003chint\u003eAdd after template field: `pub cover: Option\u0026lt;String\u0026gt;` and `pub extra: HashMap\u0026lt;String, serde_json::Value\u0026gt;`\u003c/hint\u003e\n    \u003chint\u003eserde_json Value allows nested JSON structures in TOML via inline tables\u003c/hint\u003e\n    \u003chint\u003eTest helper create_test_metadata() at line 357 needs updating\u003c/hint\u003e\n    \u003chint\u003eAdd tests for: cover field parsing, extra field parsing, extra with nested values\u003c/hint\u003e\n  \u003c/implementation_hints\u003e\n\n  \u003cguidance\u003e\n    \u003crole\u003eSenior Rust engineer familiar with serde\u003c/role\u003e\n    \u003cstyle\u003eIdiomatic Rust, match existing code patterns\u003c/style\u003e\n  \u003c/guidance\u003e\n\u003c/task\u003e\n```\n\n## Acceptance Criteria\n\n- [ ] `cover` field added to ContentMeta with `#[serde(default)]`\n- [ ] `extra` HashMap added with `#[serde(default, flatten)]`\n- [ ] serde_json added to Cargo.toml dependencies\n- [ ] Tests pass for cover field\n- [ ] Tests pass for extra fields (including nested values)\n- [ ] `mise run verify` passes (lint + tests)\n- [ ] Fields accessible in templates as `meta.cover` and `meta.extra.fieldname`","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-05T23:07:11.658206+01:00","created_by":"l1x","updated_at":"2026-01-06T10:04:56.621612+01:00","deleted_at":"2026-01-06T10:04:56.621612+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"mssg-559","title":"Refactor watch logic to allow testing of watched paths","description":"Extract the logic for determining which paths to watch into a separate function so we can verify that the config file is included in the watch list via unit tests.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T21:47:09.264451+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Function extracted and test added in commit b073b6d","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-6cj","title":"Release 1.1.0 chores","description":"Release preparation tasks: 1) Bump version in Cargo.toml to 1.1.0, 2) Update CHANGELOG/README with new features, 3) Run full test suite (mise run verify), 4) Create git tag v1.1.0, 5) Push tag to remote","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-05T23:07:11.75435+01:00","created_by":"l1x","updated_at":"2026-01-06T10:04:56.621612+01:00","deleted_at":"2026-01-06T10:04:56.621612+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-6ii","title":"Enable syntax highlighting","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T18:20:35.711852+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-6xl","title":"Syntax highlighter parsing bug: stops at first \u003e closing pre tag","description":"The highlight_html parser looks for the first '\u003e' to find the end of the opening tag, but this stops at '\u003cpre\u003e' instead of '\u003ccode class=\"language-*\"\u003e'. Result: the \u003ccode...\u003e tag is fed into the highlighter as text content instead of being parsed as markup.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-22T21:07:06.067024+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Fixed by adjusting tag parsing to skip \u003cpre\u003e and find the closing \u003e of \u003ccode\u003e tag","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"mssg-7ys","title":"Release 1.0.0","description":"Major release milestone for marie-ssg","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-02T10:56:32.498173+01:00","created_by":"l1x","updated_at":"2026-01-05T19:47:39.742207+01:00","closed_at":"2026-01-05T19:47:39.74221+01:00"}
{"id":"mssg-7ys.1","title":"Add RSS/Atom feed generation","description":"## Summary\n\nAdd RSS 2.0 feed generation to marie-ssg, following the existing sitemap.rs pattern.\n\n## Design Decisions\n\n- **Feed scope**: Configurable per content type via `rss_include` in `[content.X]`\n- **Item content**: Excerpt only (from \"## Context\" section)\n- **Output file**: `feed.xml` (hardcoded, standard convention)\n\n## Implementation Approach\n\n### 1. Add RSS Configuration\n\n**SiteConfig** (config.rs) - add:\n```rust\n#[serde(default = \"default_true\")]\npub rss_enabled: bool,           // default: true\n```\n\n**ContentTypeConfig** (config.rs) - add:\n```rust\n#[serde(default)]\npub rss_include: Option\u003cbool\u003e,   // default: None (= true for backward compat)\n```\n\nUse existing fields for feed metadata:\n- `site.title` → channel title\n- `site.tagline` → channel description\n- `site.domain` → channel link\n- `site.author` → managingEditor\n\n### 2. Create RSS Module (src/rss.rs)\n\nNew module following sitemap.rs pattern:\n- `generate_rss(\u0026Config, \u0026[LoadedContent]) -\u003e String`\n- Build RSS 2.0 XML manually (no external crate needed)\n- Filter content by `rss_include` config (default: include all)\n- Sort content by date descending\n\nRSS 2.0 structure:\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003crss version=\"2.0\" xmlns:atom=\"http://www.w3.org/2005/Atom\"\u003e\n  \u003cchannel\u003e\n    \u003ctitle\u003e{site.title}\u003c/title\u003e\n    \u003clink\u003ehttps://{site.domain}\u003c/link\u003e\n    \u003cdescription\u003e{site.tagline}\u003c/description\u003e\n    \u003clanguage\u003een\u003c/language\u003e\n    \u003cmanagingEditor\u003e{site.author}\u003c/managingEditor\u003e\n    \u003catom:link href=\"https://{domain}/feed.xml\" rel=\"self\" type=\"application/rss+xml\"/\u003e\n    \u003citem\u003e\n      \u003ctitle\u003e{meta.title}\u003c/title\u003e\n      \u003clink\u003ehttps://{domain}/{path}\u003c/link\u003e\n      \u003cdescription\u003e{excerpt}\u003c/description\u003e\n      \u003cauthor\u003e{meta.author}\u003c/author\u003e\n      \u003cpubDate\u003e{RFC 2822 date}\u003c/pubDate\u003e\n      \u003cguid\u003ehttps://{domain}/{path}\u003c/guid\u003e\n    \u003c/item\u003e\n  \u003c/channel\u003e\n\u003c/rss\u003e\n```\n\n### 3. Integrate into Build Pipeline (main.rs)\n\nAdd RSS generation step after sitemap generation (~line 242):\n```rust\nif config.site.rss_enabled {\n    let rss = rss::generate_rss(config, \u0026loaded_contents);\n    let rss_path = Path::new(\u0026config.site.output_dir).join(\"feed.xml\");\n    write_output_file(\u0026rss_path, \u0026rss)?;\n}\n```\n\n### 4. Add Module Declaration (main.rs)\n\nAdd `mod rss;` with other module declarations.\n\n### 5. Add Tests\n\n- Unit test for RSS XML generation\n- Integration test verifying feed.xml output\n\n## Files to Modify\n\n| File | Changes |\n|------|---------|\n| `src/config.rs` | Add `rss_enabled` to SiteConfig, `rss_include` to ContentTypeConfig |\n| `src/rss.rs` | **NEW** - RSS generation module (~100 lines) |\n| `src/main.rs` | Add `mod rss;`, call `generate_rss` in `run_build` |\n\n## Technical Notes\n\n- **Date format**: RSS requires RFC 2822 (e.g., \"Mon, 15 Jan 2024 10:30:00 +0000\")\n- **Content**: Use excerpt from \"## Context\" section only (empty if not found)\n- **Escaping**: XML-escape title, description, author fields\n- **No new dependencies**: Build XML manually like sitemap.rs\n- **Filtering**: Check `config.content[type].rss_include` - default to `true` if not set\n\n---\n\n## Precise Context Specification\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003ctask\u003e\n  \u003cinstructions\u003e\n    \u003csummary\u003eAdd RSS 2.0 feed generation to marie-ssg\u003c/summary\u003e\n    \u003cobjective\u003e\n      Generate /feed.xml containing content items with title, description (excerpt),\n      link, publication date, and author. Follow the sitemap.rs pattern.\n    \u003c/objective\u003e\n    \u003cconstraints\u003e\n      - No new dependencies (build XML manually)\n      - RSS 2.0 format with Atom namespace for self-link\n      - Dates in RFC 2822 format\n      - XML-escape all text content\n      - Sort items by date descending\n      - Filter by rss_include config per content type (default: include all)\n      - Use excerpt only for description (empty string if none)\n      - Output to feed.xml (hardcoded filename)\n    \u003c/constraints\u003e\n  \u003c/instructions\u003e\n\n  \u003ccontext\u003e\n    \u003ctree root=\"src/\"\u003e\n        src/\n        ├── config.rs      # Add RSS config fields here\n        ├── content.rs     # ContentMeta, ContentItem structs (reference)\n        ├── error.rs       # Error types (reference)\n        ├── main.rs        # Add mod rss + call generate_rss\n        ├── output.rs      # write_output_file function (reference)\n        ├── sitemap.rs     # PATTERN TO FOLLOW for RSS\n        ├── syntax.rs\n        ├── template.rs    # ContentItem, excerpt extraction (reference)\n        └── utils.rs\n    \u003c/tree\u003e\n\n    \u003cfiles\u003e\n      \u003cfile path=\"src/sitemap.rs\" mode=\"full\" note=\"Pattern to follow\"/\u003e\n      \u003cfile path=\"src/config.rs\" mode=\"full\" note=\"Add RSS fields to SiteConfig\"/\u003e\n      \u003cfile path=\"src/main.rs\" mode=\"slice\" lines=\"1-50,111-250\" note=\"Module decls + run_build\"/\u003e\n      \u003cfile path=\"src/content.rs\" mode=\"slice\" lines=\"19-68\" note=\"Content and ContentMeta structs\"/\u003e\n      \u003cfile path=\"src/template.rs\" mode=\"slice\" lines=\"60-78\" note=\"build_content_item for excerpt\"/\u003e\n      \u003cfile path=\"src/output.rs\" mode=\"slice\" lines=\"180-197\" note=\"write_output_file\"/\u003e\n    \u003c/files\u003e\n  \u003c/context\u003e\n\n  \u003cguidance\u003e\n    \u003crole\u003eSenior Rust engineer\u003c/role\u003e\n    \u003cstyle\u003e\n      - Idiomatic Rust, no unsafe\n      - Follow existing patterns in sitemap.rs\n      - Use time crate for RFC 2822 formatting\n      - Proper error handling with thiserror\n    \u003c/style\u003e\n  \u003c/guidance\u003e\n\u003c/task\u003e\n```\n\n## Verification\n\nAfter implementation:\n1. `mise run verify` - lint + tests pass\n2. Build example site and verify feed.xml output\n3. Validate RSS with online validator","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-02T10:56:40.200005+01:00","created_by":"l1x","updated_at":"2026-01-02T11:42:25.989007+01:00","closed_at":"2026-01-02T11:42:25.989007+01:00","close_reason":"RSS feed generation implemented with configurable content type filtering","labels":["backend"]}
{"id":"mssg-7ys.2","title":"Extend watch mode to Linux","description":"## Summary\n\nExtend watch mode from macOS-only to cross-platform support for Linux (and potentially Windows).\n\n## Current Implementation\n\n| Location | Content |\n|----------|---------|\n| `src/main.rs:261-315` | macOS watch function with `#[cfg(target_os = \"macos\")]` |\n| `src/main.rs:318-322` | Non-macOS stub that returns error |\n| `src/main.rs:283-284` | `fsevent::FsEvent` usage |\n| `Cargo.toml:55` | `fsevent = { version = \"2\" }` dependency |\n\n## Implementation Approach\n\n1. Replace `fsevent = \"2\"` with `notify = \"6\"` in Cargo.toml\n2. Remove `#[cfg(target_os = \"macos\")]` conditional compilation\n3. Rewrite watch function using notify crate API\n4. Preserve 500ms debounce logic (lines 270-280)\n5. Keep same watched directories: config file, content_dir, template_dir, static_dir\n\n## Acceptance Criteria\n\n- [ ] Watch mode works on Linux with 500ms debounce\n- [ ] Watch mode continues to work on macOS\n- [ ] `mise run verify` passes (lint + tests)\n- [ ] Documentation updated if needed\n\n---\n\n## Precise Context Specification\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003ctask\u003e\n  \u003cinstructions\u003e\n    \u003csummary\u003eExtend watch mode from macOS-only to cross-platform using notify crate\u003c/summary\u003e\n    \u003cobjective\u003e\n      Replace fsevent crate (macOS-only) with notify crate for cross-platform\n      file watching. Maintain 500ms debounce behavior and rebuild on changes\n      to content, templates, static, and config directories.\n    \u003c/objective\u003e\n    \u003cconstraints\u003e\n      - Replace fsevent with notify crate\n      - Remove #[cfg(target_os = \"macos\")] conditional\n      - Preserve 500ms debounce behavior\n      - Watch same directories: config file, content_dir, template_dir, static_dir\n      - Follow existing code style and error handling patterns\n      - Run `mise run verify` after implementation\n    \u003c/constraints\u003e\n  \u003c/instructions\u003e\n\n  \u003ccontext\u003e\n    \u003ctree root=\"src/\"\u003e\n        src/\n        ├── main.rs        # Watch implementation at lines 261-322\n        ├── config.rs      # Config loading (reference)\n        ├── error.rs       # Error types (reference)\n        ├── content.rs\n        ├── template.rs\n        ├── output.rs\n        ├── sitemap.rs\n        ├── rss.rs\n        ├── syntax.rs\n        └── utils.rs\n    \u003c/tree\u003e\n\n    \u003cfiles\u003e\n      \u003cfile path=\"src/main.rs\" mode=\"slice\" lines=\"261-322\" note=\"Watch implementation to replace\"/\u003e\n      \u003cfile path=\"src/main.rs\" mode=\"slice\" lines=\"1-40\" note=\"Module imports and CLI args\"/\u003e\n      \u003cfile path=\"src/error.rs\" mode=\"codemap\" note=\"Error types reference\"/\u003e\n      \u003cfile path=\"Cargo.toml\" mode=\"slice\" lines=\"50-60\" note=\"Dependencies - replace fsevent with notify\"/\u003e\n    \u003c/files\u003e\n\n    \u003cdependencies\u003e\n      \u003cdep name=\"notify\" version=\"6\" items=\"Watcher,RecommendedWatcher,RecursiveMode,Config,Event\"/\u003e\n    \u003c/dependencies\u003e\n  \u003c/context\u003e\n\n  \u003cguidance\u003e\n    \u003crole\u003eSenior Rust engineer\u003c/role\u003e\n    \u003cstyle\u003e\n      - Idiomatic Rust, no unsafe\n      - Use notify crate's RecommendedWatcher\n      - Proper error handling with thiserror\n      - Remove platform-specific cfg attributes\n    \u003c/style\u003e\n  \u003c/guidance\u003e\n\u003c/task\u003e\n```\n\n## Verification\n\nAfter implementation:\n1. `mise run verify` - lint + tests pass\n2. Test watch mode on Linux\n3. Verify macOS still works","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T11:03:23.524935+01:00","created_by":"l1x","updated_at":"2026-01-05T19:43:26.668484+01:00","closed_at":"2026-01-05T19:43:26.668484+01:00","close_reason":"Implemented release workflow"}
{"id":"mssg-7ys.3","title":"Add quickstart/example command for LLM/human onboarding","description":"## Summary\n\nAdd a new CLI command (e.g., `marie-ssg quickstart` or `marie-ssg example`) that outputs markdown documentation explaining Marie's features and configuration file format. This serves as onboarding material for both LLMs and humans.\n\n## Use Cases\n\n1. **LLM Context**: User can pipe output to an LLM to quickly explain how Marie works\n2. **Human Reference**: Quick reference without needing to find external docs\n3. **Project Setup**: Guide for creating a new site from scratch\n\n## Proposed Output Content\n\nThe markdown should cover:\n\n### Site Configuration (`site.toml`)\n- All `[site]` fields with examples and descriptions\n- Content type configuration (`[content.X]`)\n- Dynamic variables (`[dynamic]`)\n- RSS and sitemap options\n\n### Content Structure\n- Directory layout (`content/`, `templates/`, `static/`)\n- Markdown files with `.meta.toml` metadata format\n- ContentMeta fields: title, date (RFC3339), author, tags, template\n\n### Templates\n- Minijinja/Jinja2 syntax basics\n- Available context variables (`config`, `content`, `meta`, `all_content`)\n- Template inheritance\n- Date formatting filters\n\n### Features\n- Syntax highlighting (supported languages)\n- Sitemap generation\n- RSS feed generation\n- Watch mode (macOS)\n\n## Implementation Approach\n\n1. Add new subcommand to CLI (`quickstart` or `example`)\n2. Output hardcoded markdown string to stdout\n3. User can redirect to file or pipe to LLM\n\n## Example Usage\n\n```bash\n# View in terminal\nmarie-ssg quickstart\n\n# Save to file\nmarie-ssg quickstart \u003e QUICKSTART.md\n\n# Pipe to LLM\nmarie-ssg quickstart | llm \"help me set up a blog\"\n```\n\n## Acceptance Criteria\n\n- [ ] New CLI subcommand added\n- [ ] Comprehensive markdown output covering all features\n- [ ] Examples for each configuration section\n- [ ] Output is well-formatted and readable\n- [ ] Tests verify command works","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T11:49:05.892923+01:00","created_by":"l1x","updated_at":"2026-01-02T12:21:27.442865+01:00","closed_at":"2026-01-02T12:21:27.442865+01:00","close_reason":"Added guide subcommand that outputs comprehensive markdown documentation","labels":["cli"]}
{"id":"mssg-7ys.4","title":"Investigate minimal FS event library without tokio","description":"## Summary\n\nResearch and evaluate options for a minimal file system event library that does not require tokio as a dependency. Goal is to keep marie-ssg binary small and dependency tree lean.\n\n## Conclusion\n\n**Use `notify` directly** with a thin async wrapper (~20 lines).\n\nAll higher-level libraries (watchexec, hotwatch) just wrap notify with significant overhead:\n- watchexec: 72 deps (notify is 10) - adds process supervision, miette, full tokio runtime\n- hotwatch: 22 deps - adds crossbeam-channel, parking_lot\n\n### Async Integration Pattern\n\n```rust\nuse notify::{recommended_watcher, Event, RecursiveMode, Watcher};\nuse tokio::sync::mpsc;\n\npub fn async_watcher() -\u003e (impl Watcher, mpsc::Receiver\u003cnotify::Result\u003cEvent\u003e\u003e) {\n    let (tx, rx) = mpsc::channel(100);\n    let watcher = recommended_watcher(move |res| {\n        let _ = tx.blocking_send(res);\n    }).unwrap();\n    (watcher, rx)\n}\n```\n\nThis integrates with the host projects tokio runtime - no separate runtime spawned.\n\n## Dependency Comparison\n\n| Crate | Deps | Tokio Required | Notes |\n|-------|------|----------------|-------|\n| notify | ~10 | No | Core file watcher |\n| hotwatch | ~22 | No | Wraps notify 6.1.1 |\n| watchexec | ~72 | Yes (rt-multi-thread) | Heavy, includes process supervision |\n\n## References\n\n- https://github.com/watchexec/watchexec - production file watcher (uses notify)\n- https://github.com/eradman/entr - C tool, uses kqueue/inotify directly\n\n## Next Steps\n\nImplement thin async wrapper around notify when cross-platform watch mode is prioritized.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:51:33.007878+01:00","created_by":"l1x","updated_at":"2026-01-03T11:31:03.965176+01:00","closed_at":"2026-01-03T11:31:03.965176+01:00","close_reason":"Dropped: build works cross-platform, watch mode being macOS-only is acceptable. No need for cross-platform FS library.","labels":["research"]}
{"id":"mssg-7ys.5","title":"Investigate markdown attribute syntax and HTML embedding","description":"## Summary\n\nResearch options for extending markdown rendering to support:\n\n1. **Inline attribute lists (IAL)** - Kramdown/CommonMark extension syntax:\n   ```markdown\n   \\![Agentic Workflow](/static/img/workflow.svg){:class=\"deez-nuts\"}\n   ```\n\n2. **Raw HTML embedding** - Allow HTML blocks/inline within markdown\n\n## Findings\n\n### Raw HTML Support\n\n**Current `markdown` crate already supports this\\!**\n\n```rust\nlet opts = Options {\n    compile: CompileOptions {\n        allow_dangerous_html: true,\n        ..CompileOptions::gfm()\n    },\n    ..Options::gfm()\n};\nmarkdown::to_html_with_options(\u0026content, \u0026opts)\n```\n\n### Inline Attribute Lists (IAL)\n\n**No major Markdown crate supports IAL syntax.** Tested:\n\n| Crate | Deps | Raw HTML | IAL Attributes | Notes |\n|-------|------|----------|----------------|-------|\n| markdown (current) | 3 | ✅ via option | ❌ No | CommonMark + GFM |\n| pulldown-cmark | 8 | ✅ Yes | ❌ No | Most popular, pull parser |\n| comrak | 10 | ✅ Yes | ❌ No | Many extensions |\n| jotdown (Djot) | 2 | ✅ Yes | ✅ Native | Different markup language |\n\n### Options for IAL Support\n\n1. **Use Djot instead of Markdown** (jotdown crate, 2 deps)\n   - Native attribute syntax: `\\![alt](url){.class #id}`\n   - Requires content migration from Markdown to Djot\n   - Syntax is similar but not identical\n\n2. **Post-process HTML with regex**\n   - Parse `{:class=\"foo\"}` after images/links\n   - Inject attributes into generated HTML\n   - Fragile, but works with current crate\n\n3. **Custom pulldown-cmark extension**\n   - Write parser extension for IAL syntax\n   - More robust than regex\n   - Significant effort\n\n4. **Accept limitation, use raw HTML for styled elements**\n   - `\u003cimg src=\"...\" class=\"deez-nuts\" /\u003e`\n   - Works today with `allow_dangerous_html`\n\n## Recommendation\n\n**Short-term:** Enable `allow_dangerous_html` for raw HTML embedding (trivial change).\n\n**For IAL:** Either:\n- Accept raw HTML for styled elements (no code change)\n- Evaluate Djot migration if attribute syntax is critical\n- Implement post-processing regex for common patterns\n\n## Code Change for Raw HTML\n\n```rust\n// In src/content.rs\nlet opts = markdown::Options {\n    compile: markdown::CompileOptions {\n        allow_dangerous_html: true,\n        ..markdown::CompileOptions::gfm()\n    },\n    ..markdown::Options::gfm()\n};\nlet html = markdown::to_html_with_options(\u0026content.data, \u0026opts)?;\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:41:21.871577+01:00","created_by":"l1x","updated_at":"2026-01-03T13:15:57.763429+01:00","closed_at":"2026-01-03T13:15:57.763429+01:00","close_reason":"Research complete. Raw HTML: enable allow_dangerous_html. IAL: not supported by any major crate, options documented.","labels":["research"]}
{"id":"mssg-7ys.6","title":"CSS changes not re-rendered / caching issue","description":"## Summary\n\nCSS files are not being refreshed in browser after changes and rebuild.\n\n## Root Cause: Browser Caching\n\nAfter investigation, marie-ssg's file handling is **correct**:\n- `should_copy_file()` in output.rs properly detects changes via size and mtime comparison\n- Watch mode monitors the static_dir for changes\n- CSS files ARE copied correctly when they change\n\nThe issue is **browser caching**. CSS files are referenced without cache-busting:\n```html\n\u003clink rel=\"stylesheet\" href=\"/style.css\"\u003e\n```\n\nBrowsers aggressively cache these files. Even after marie rebuilds and deploys, browsers serve stale cached versions.\n\n## Workarounds\n\n1. **Hard refresh** - Cmd+Shift+R (developer workaround)\n2. **HTTP cache headers** - Configure web server with `Cache-Control: max-age=0` for CSS\n3. **Manual version query** - Add `?v=2` to CSS links manually\n\n## Potential Feature: Cache Busting\n\nCreate a new issue if desired:\n- Add template variable `{{ static_hash }}` for cache-busting query strings\n- Or implement content-hash filenames like `style.abc123.css`\n\n## Labels\n\n[browser] [wontfix]","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T13:15:22.842422+01:00","created_by":"l1x","updated_at":"2026-01-03T16:52:34.43184+01:00","closed_at":"2026-01-03T16:52:34.43184+01:00","close_reason":"Not a marie-ssg bug. Browser caching is expected behavior. CSS files are correctly copied on changes. Users should configure HTTP cache headers on their web server or manually add version query strings. A cache-busting feature could be added as a separate enhancement.","labels":["backend"]}
{"id":"mssg-7ys.7","title":"Add allow_dangerous_html site config option","description":"## Summary\n\nAdd a site configuration option to enable raw HTML passthrough in markdown content. When enabled, HTML tags in markdown files are rendered as-is instead of being escaped.\n\n## Use Case\n\nAllow embedding HTML elements that markdown cannot express:\n\n```markdown\nSome text above.\n\n\u003cfigure\u003e\n  \u003cimg src=\"/static/img/photo.jpg\" alt=\"Photo\"\u003e\n  \u003cfigcaption\u003eA beautiful sunset\u003c/figcaption\u003e\n\u003c/figure\u003e\n\nMore text below.\n```\n\n## Implementation\n\n### Config (site.toml)\n\n```toml\n[markdown]\nallow_dangerous_html = true  # default: false\n```\n\n### Code Change (src/content.rs)\n\n```rust\nlet opts = markdown::Options {\n    compile: markdown::CompileOptions {\n        allow_dangerous_html: config.markdown.allow_dangerous_html,\n        ..markdown::CompileOptions::gfm()\n    },\n    ..markdown::Options::gfm()\n};\nlet html = markdown::to_html_with_options(\u0026content.data, \u0026opts)?;\n```\n\n## Security Note\n\nNamed \"dangerous\" because it passes HTML through unescaped. Users must trust their content sources when enabling this option.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T13:28:14.773435+01:00","created_by":"l1x","updated_at":"2026-01-03T15:20:12.738807+01:00","closed_at":"2026-01-03T15:20:12.738807+01:00","close_reason":"Implemented allow_dangerous_html config option. All 119 tests pass.","labels":["backend"]}
{"id":"mssg-7ys.8","title":"Improve logging format consistency and clarity","description":"## Summary\n\nImprove logging format to be more consistent and visually scannable.\n\n## Current Format (Problems)\n\n```\nmarie_ssg: Loading: src/content/projects/harddots.md\nbuild_fresh:run_build: marie_ssg: Rendering 'Harddots' ...\nbuild_fresh:run_build: marie_ssg::output: Wrote output file: \"out/projects/harddots.html\"\n```\n\nIssues:\n- Inconsistent span prefixes (`marie_ssg:` vs `build_fresh:run_build:`)\n- Redundant module paths (`marie_ssg::output:`)\n- Verbose action words (Loading, Rendering, Wrote)\n- Hard to scan for what changed vs unchanged\n\n## Desired Format\n\n```\n← src/content/projects/harddots.md\nsrc/content/projects/harddots.md → out/projects/harddots.html\n= src/static/img/logo.svg (unchanged)\n```\n\n### Rules\n\n| Symbol | Meaning | Example |\n|--------|---------|---------|\n| `←` | Input/loading (single file) | `← src/content/file.md` |\n| `→` | Output/transformation | `a.md → b.html` |\n| `=` | Unchanged/skipped | `= file.css (unchanged)` |\n\n### Consistent Span\n\nAll logs should use same span format (e.g., `build:` or none).\nRemove `marie_ssg:` and `marie_ssg::module:` prefixes.\n\n## Implementation Notes\n\n- Update tracing span configuration\n- Modify log messages in main.rs, output.rs\n- Consider structured logging for machine parsing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T15:35:41.636626+01:00","created_by":"l1x","updated_at":"2026-01-03T18:48:29.096308+01:00","closed_at":"2026-01-03T18:48:29.096308+01:00","close_reason":"Implemented cleaner logging format with symbols (← → = ✓), removed module paths and span prefixes, demoted verbose logs to debug level","labels":["cli"]}
{"id":"mssg-9xx","title":"Pass all_content variable to templates for tags counting","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T18:20:54.487394+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-dn7","title":"Add test coverage with cargo tarpaulin","description":"Add cargo tarpaulin for test coverage metrics to ensure AI-generated code is properly tested.\n\nImplementation:\n1. Add coverage task to mise.toml: cargo tarpaulin --out Html\n2. Document coverage workflow in CLAUDE.md\n3. Consider adding coverage threshold enforcement","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:54.184833+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-f4r","title":"Use more efficient HTML unescape implementation","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-24T22:11:39.847932+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-gnk","title":"Add watch subcommand for live rebuilds","description":"Add marie-ssg watch command that monitors src/ and templates/ directories for changes and automatically triggers a rebuild when files change. This enables a faster development workflow without manually re-running build after each edit.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-20T11:31:09.788006+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Implemented watch subcommand with fsevent for macOS","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"mssg-kxv","title":"Update tests in src/content.rs to improve coverage","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-24T23:31:50.118136+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-kzw","title":"Release 1.0.1","description":"Release 1.0.1 with header URI fragment feature","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T19:47:55.394263+01:00","created_by":"l1x","updated_at":"2026-01-05T21:49:42.396218+01:00","closed_at":"2026-01-05T21:49:42.396218+01:00","close_reason":"Release 1.0.1 complete with header_uri_fragment feature"}
{"id":"mssg-kzw.1","title":"Add header_uri_fragment config option for anchor links","description":"Add a site config option header_uri_fragment = true that generates anchor links for headers (h1-h6), enabling direct linking to sections via URL fragments (e.g., http://example.com/page.html#section-title).\n\nWhen enabled, headers should be transformed to include both an id attribute AND a nested anchor link:\n\n**Input (markdown):**\n```markdown\n## My Section Title\n```\n\n**Output (HTML):**\n```html\n\u003ch2 id=\"my-section-title\"\u003e\n  \u003ca href=\"#my-section-title\"\u003eMy Section Title\u003c/a\u003e\n\u003c/h2\u003e\n```\n\nThis enables:\n1. URL fragment navigation (browser scrolls to section when visiting page#fragment)\n2. Clickable anchor (users can click/right-click header to copy link)\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003ctask\u003e\n  \u003cinstructions\u003e\n    \u003csummary\u003eAdd header_uri_fragment config option to generate anchor links on headings\u003c/summary\u003e\n    \u003cobjective\u003e\n      When header_uri_fragment = true in site config, transform all h1-h6 headers to include:\n      1. An id attribute based on slugified header text\n      2. A nested anchor link pointing to that id\n      \n      Example transformation:\n      \u0026lt;h2\u0026gt;My Section\u0026lt;/h2\u0026gt; \n      becomes \n      \u0026lt;h2 id=\"my-section\"\u0026gt;\u0026lt;a href=\"#my-section\"\u0026gt;My Section\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt;\n    \u003c/objective\u003e\n    \u003cconstraints\u003e\n      - Default value should be false (opt-in feature)\n      - Slugify: lowercase, replace spaces with hyphens, remove non-alphanumeric chars\n      - Handle duplicate headers (append -1, -2, etc. if same slug appears multiple times)\n      - Preserve existing header content (could contain inline formatting like **bold**)\n      - Add tests for config parsing and HTML transformation\n      - Update the guide output in main.rs to document the new option\n    \u003c/constraints\u003e\n  \u003c/instructions\u003e\n\n  \u003ccontext\u003e\n    \u003ctree root=\"src/\"\u003e\n        src/\n        ├── config.rs      # Add header_uri_fragment to SiteConfig\n        ├── content.rs     # Add header anchor processing after markdown conversion\n        ├── error.rs\n        ├── main.rs        # Update guide, pass config through pipeline\n        ├── output.rs\n        ├── rss.rs\n        ├── sitemap.rs\n        ├── syntax.rs\n        ├── template.rs\n        └── utils.rs       # Add slugify function\n    \u003c/tree\u003e\n\n    \u003cfiles\u003e\n      \u003cfile path=\"src/config.rs\" mode=\"full\" notes=\"Add header_uri_fragment: bool field to SiteConfig with #[serde(default)] for false default\"/\u003e\n      \u003cfile path=\"src/content.rs\" mode=\"full\" notes=\"Add header anchor injection after markdown conversion - must handle inline formatting in headers\"/\u003e\n      \u003cfile path=\"src/utils.rs\" mode=\"full\" notes=\"Add slugify() function for header text to ID conversion\"/\u003e\n      \u003cfile path=\"src/main.rs\" mode=\"slice\" lines=\"326-405\" notes=\"Update guide documentation to include new option\"/\u003e\n    \u003c/files\u003e\n  \u003c/context\u003e\n\n  \u003cguidance\u003e\n    \u003crole\u003eSenior Rust engineer familiar with static site generators\u003c/role\u003e\n    \u003cstyle\u003e\n      - Idiomatic Rust with proper error handling\n      - Follow existing patterns (see syntax_highlighting_enabled as reference)\n      - Use regex for HTML header parsing and transformation\n      - Maintain test coverage parity with existing features\n    \u003c/style\u003e\n    \u003cimplementation_hints\u003e\n      - Regex pattern: \u0026lt;h([1-6])\u0026gt;(.+?)\u0026lt;/h\\1\u0026gt; to capture header level and content\n      - Extract text-only content for slugify (strip HTML tags for ID generation)\n      - Wrap original content (with formatting) in anchor link\n      - Track seen slugs in HashMap to handle duplicates\n      - Apply to both main content and excerpts for consistency\n    \u003c/implementation_hints\u003e\n  \u003c/guidance\u003e\n\u003c/task\u003e\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T19:48:53.841648+01:00","created_by":"l1x","updated_at":"2026-01-05T20:46:22.842835+01:00","closed_at":"2026-01-05T20:46:22.842835+01:00","close_reason":"Implemented header_uri_fragment config option with anchor links for headers"}
{"id":"mssg-kzw.2","title":"Bump version to 1.0.1 and tag release","description":"Update version in Cargo.toml from 1.0.0 to 1.0.1, then create git tag v1.0.1.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T19:55:50.93316+01:00","created_by":"l1x","updated_at":"2026-01-05T21:49:37.497447+01:00","closed_at":"2026-01-05T21:49:37.497447+01:00","close_reason":"Version bumped to 1.0.1, tag v1.0.1 created","dependencies":[{"issue_id":"mssg-kzw.2","depends_on_id":"mssg-kzw.1","type":"blocks","created_at":"2026-01-05T19:55:55.594184+01:00","created_by":"l1x"}]}
{"id":"mssg-mjq","title":"Watch mode doesn't reload on config file changes","description":"The watch mode currently only watches content_dir, template_dir, and static_dir. It should also watch the config file itself (e.g., site.toml) so that changes to configuration (like site title, etc.) trigger a rebuild.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-20T21:33:54.615373+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"mssg-myp","title":"Implement sitemap.xml generation","description":"## Feature\n\nGenerate a sitemap.xml file during site build to improve SEO and search engine discoverability.\n\n## Requirements\n\n- Generate sitemap.xml in the output root directory\n- Include all HTML pages with their URLs\n- Use the domain from site.toml config\n- Include lastmod dates from content metadata\n- Follow the sitemap protocol: https://www.sitemaps.org/protocol.html\n\n## Implementation Notes\n\n- Add sitemap generation after content rendering in the build pipeline\n- Consider adding optional sitemap configuration in site.toml (e.g., exclude patterns, priority settings)\n- Use the existing content metadata (date) for lastmod values","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-24T01:42:43.42861+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Implemented sitemap.xml generation with 8 unit tests and 1 integration test. Sitemap includes homepage, content type indexes, and all content pages with lastmod dates.","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"mssg-psj","title":"Expand CLAUDE.md with common development patterns","description":"Add concrete examples to CLAUDE.md for common development tasks. This helps AI assistants understand how to make changes correctly on the first attempt.\n\nPatterns to document:\n1. How to add a new content type\n2. How to add a new template variable\n3. How to add a new CLI flag\n4. Common error patterns and fixes\n\nEach pattern should include:\n- Step-by-step instructions\n- Relevant files to modify\n- Example code snippets","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-22T21:39:53.996085+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Closed","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mssg-q51","title":"Fix watch mode not reloading templates","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-20T21:12:14.084903+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Fixed by creating fresh template environment on each watch rebuild","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"mssg-vh1","title":"Release 0.9.0","description":"Collecting the last set of changes for 0.9.0","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T21:26:21.722873+01:00","updated_at":"2025-12-30T16:56:39.532335+01:00","closed_at":"2025-12-30T16:56:39.532339+01:00"}
{"id":"mssg-vh1.1","title":"Fix missing mise tasks (verify, tests)","description":"The verify and tests tasks were removed during mise.toml refactoring but are still referenced in CLAUDE.md. Need to restore them.\n\n## Summary of Changes\n\nAdded to mise.toml:\n- `tests`: Run all tests with --nocapture\n- `verify`: Full verification (lint + tests) before commit\n\nBoth tasks tested and working.\n\nAcceptance Criteria:\n- [x] mise run tests works (runs all tests)\n- [x] mise run verify works (runs lint + tests)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:42:47.282351+01:00","created_by":"l1x","updated_at":"2025-12-30T00:30:26.492029+01:00","closed_at":"2025-12-30T00:30:26.492036+01:00"}
{"id":"mssg-vh1.10","title":"Review 0.9.0 release changes","description":"Review all changes in the 0.9.0 release before tagging.\n\n## Changes to Review\n\n### Dependencies\n- [ ] `chrono` → `time` + `kiters` migration\n- [ ] `basic-toml` → `toml` migration\n- [ ] `autumnus` language feature flags (10 languages instead of 91)\n\n### Code Changes\n- [ ] src/main.rs - tracing initialization with UTC timestamps\n- [ ] src/content.rs - time crate integration, toml parsing\n- [ ] src/config.rs - toml parsing\n- [ ] src/template.rs - date formatting\n- [ ] src/sitemap.rs - time crate integration\n\n### Configuration\n- [ ] Cargo.toml - dependencies and features\n- [ ] mise.toml - restored tasks\n\n### Documentation\n- [ ] README.md - v0.9.0 changelog\n- [ ] docs/toml-migration.md - migration guide\n\n### Verification\n- [ ] All 99 tests pass\n- [ ] Binary size reduced (80MB → 9MB)\n- [ ] Release build succeeds","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T10:19:33.306274+01:00","created_by":"l1x","updated_at":"2025-12-30T16:54:18.316106+01:00","closed_at":"2025-12-30T16:54:18.316113+01:00","dependencies":[{"issue_id":"mssg-vh1.10","depends_on_id":"mssg-vh1","type":"parent-child","created_at":"2025-12-30T10:19:33.307094+01:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"mssg-vh1.10","author":"l1x","text":"## Review Summary for v0.9.0 Release\n\n### ✅ Dependencies Review\n- **time crate**: Successfully migrated from chrono to time + kiters\n  - Used in: content.rs, utils.rs, template.rs, sitemap.rs\n  - Proper serde integration with rfc3339 format\n  - Format descriptions for date formatting\n- **toml crate**: Successfully migrated from basic-toml to toml\n  - Updated error types in config.rs and content.rs\n  - ~2x faster parsing per benchmarks\n- **autumnus**: Limited to 10 languages (down from 91)\n  - bash, css, html, javascript, json, python, rust, toml, typescript, yaml\n  - Significant binary size reduction expected\n- **kiters**: Added for UTC timestamp formatting in tracing\n\n### ✅ Code Changes Review\n- **main.rs**: Enhanced tracing with EnvFilter and UTC timestamps via kiters\n- **content.rs**: time crate integration for date handling, toml parsing updated\n- **config.rs**: toml::de::Error for parsing\n- **template.rs**: time crate for date formatting in templates\n- **utils.rs**: time crate for date prefix operations\n- **sitemap.rs**: time crate for lastmod formatting\n\n### ✅ Configuration Review\n- **Cargo.toml**: \n  - Version 0.9.0\n  - Optimized release profile (opt-level = \"s\", LTO, strip symbols)\n  - autumnus with 10 language features\n- **mise.toml**: Tasks restored (verify, tests, lint, etc.)\n\n### ✅ Documentation Review\n- **README.md**: Comprehensive v0.9.0 changelog added\n- **docs/toml-migration.md**: Detailed migration guide with benchmarks\n\n### ✅ Verification\n- **Tests**: All 98 tests passing (87 unit + 11 integration)\n- **Code quality**: Clippy passes with no warnings\n- **Build**: Cannot verify due to fish shell environment issues (linker not found)\n  - This is an environment issue, not a code issue\n  - The optimized profile settings are correct for size reduction\n\n### ✅ Release Readiness\nAll code changes are correct and well-documented. The migration from chrono to time and basic-toml to toml is complete. The test suite passes completely. \n\nNote: Binary size reduction (80MB → 9MB) cannot be verified due to build environment issues, but the configuration changes (limited autumnus languages, optimized release profile) are correct and should achieve this reduction.","created_at":"2025-12-30T15:47:56Z"}]}
{"id":"mssg-vh1.11","title":"Fix UTF-8 byte corruption in HTML entity parsing","description":"**Location:** `src/syntax.rs:91-142`\n\n**Issue:** `out.push(bytes[i] as char)` treats any byte (0-255) as a valid char, but bytes 128-255 are not valid standalone UTF-8 characters.\n\n**Impact:** Non-ASCII input in code blocks can cause silent data corruption.\n\n**Demonstrated:**\n- Input: `\"café\"` → Output: `\"cafÃ©\"` (corrupted)\n- UTF-8 bytes for 'é' (0xC3 0xA9 = 195, 169) split into separate chars\n\n**Test:** `test_unescape_html_entities_utf8_preservation`\n\n## Fix\n\nReplaced byte-by-byte iteration with string slicing in `unescape_html_entities()`.\n\n**Before (buggy):**\n```rust\nlet bytes = input.as_bytes();\nwhile i \u003c bytes.len() {\n    if bytes[i] != b'\u0026' {\n        out.push(bytes[i] as char);  // Corrupts multi-byte UTF-8\n        i += 1;\n        continue;\n    }\n    // ...\n}\n```\n\n**After (fixed):**\n```rust\nlet mut remaining = input;\nwhile let Some(amp_pos) = remaining.find('\u0026') {\n    out.push_str(\u0026remaining[..amp_pos]);  // Preserves UTF-8\n    remaining = \u0026remaining[amp_pos..];\n    // ...\n}\nout.push_str(remaining);  // Copy remaining content\n```\n\n**Key insight:** HTML entities are ASCII-only (`\u0026lt;`, `\u0026#39;`, etc.), so `find('\u0026')` and `find(';')` safely return byte positions at UTF-8 boundaries. Using `push_str()` for non-entity content preserves all multi-byte characters.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T10:35:35.738401+01:00","created_by":"l1x","updated_at":"2025-12-30T10:45:08.188984+01:00","closed_at":"2025-12-30T10:44:16.680982+01:00","close_reason":"Fixed by replacing byte indexing with string slicing. All 100 tests pass."}
{"id":"mssg-vh1.12","title":"Replace .expect() panics with proper error handling","description":"**Locations:**\n- `src/main.rs:86,94,256` - config loading\n- `src/template.rs:15-17` - date formatting\n- `src/utils.rs:110-111` - date formatting\n- `src/sitemap.rs:74-75` - date formatting\n\n**Issue:** Uses `.expect()` which panics on error instead of propagating errors properly.\n\n**Impact:** Ungraceful crashes instead of user-friendly error messages.\n\n## Fix\n\n### Config Loading (main.rs, config.rs)\n\n**Before:**\n```rust\nlet config = Config::load_from_file(config_file).expect(\"Failed to load configuration\");\n```\n\n**After:**\n```rust\n// config.rs - return proper error type\npub fn load_from_file(path: \u0026str) -\u003e Result\u003cSelf, ConfigError\u003e { ... }\n\n// main.rs - propagate error with ?\nlet config = Config::load_from_file(config_file)?;\n\n// main.rs - exit with non-zero code on error\nif let Err(e) = build(\u0026args.config_file) {\n    error!(\"{:?}\", e);\n    std::process::exit(1);\n}\n```\n\n### Date Formatting (template.rs, utils.rs, sitemap.rs)\n\n**Before:**\n```rust\nlet format = time::format_description::parse(\"[year]-[month]-[day]\").expect(\"valid format\");\ndate.format(\u0026format).expect(\"valid date\")\n```\n\n**After:**\n```rust\n// Format validated at compile time via macro\nconst FORMAT: \u0026[time::format_description::FormatItem\u003c'static\u003e] =\n    format_description!(\"[year]-[month]-[day]\");\ndate.format(\u0026FORMAT).unwrap_or_else(|_| \"0000-00-00\".to_string())\n```\n\n**Key improvements:**\n- Compile-time format validation eliminates runtime parse errors\n- Graceful fallbacks instead of panics\n- Proper exit codes for CLI error handling","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T10:35:35.88301+01:00","created_by":"l1x","updated_at":"2025-12-30T10:51:29.985821+01:00","closed_at":"2025-12-30T10:51:29.985821+01:00","close_reason":"Replaced all .expect() with proper error handling. All 100 tests pass."}
{"id":"mssg-vh1.13","title":"Remove unnecessary PathBuf cloning in parallel loop","description":"**Location:** `src/main.rs:131-161`, `src/content.rs:269-303`\n\n**Issue:** `file.clone()` called twice per file during parallel content loading.\n\n**Impact:** Extra allocations for sites with thousands of files.\n\n## Fix\n\n### Problem Analysis\n```rust\n// Before: 2 clones per file\nlet html = convert_content_with_highlighting(\u0026content, file.clone(), ...)?;  // Clone #1\nOk(LoadedContent { path: file.clone(), ... })  // Clone #2\n```\n\nThe function took `PathBuf` by value but only used it for error messages (rare case).\n\n### Solution\n\n**1. Change function signature** (`src/content.rs:271`):\n```rust\n// Before\nfn convert_content_with_highlighting(content: \u0026Content, path: PathBuf, ...) \n\n// After  \nfn convert_content_with_highlighting(content: \u0026Content, path: \u0026Path, ...)\n```\n\n**2. Clone only on error** (`src/content.rs:281,295`):\n```rust\nErr(ContentError::MarkdownParsingFailed {\n    path: path.to_path_buf(),  // Clone only when error occurs\n    message: e.to_string(),\n})\n```\n\n**3. Use into_par_iter()** (`src/main.rs:132`):\n```rust\n// Before: par_iter() gives \u0026PathBuf, requires clone\nfiles.par_iter().map(|file| { file.clone() ... })\n\n// After: into_par_iter() gives owned PathBuf, no clone needed\nfiles.into_par_iter().map(|file| { file ... })\n```\n\n### Result\n| Scenario | Before | After |\n|----------|--------|-------|\n| Happy path | 2 clones | 0 clones |\n| Error path | 2 clones | 1 clone |","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:35:36.026505+01:00","created_by":"l1x","updated_at":"2025-12-30T11:11:08.517358+01:00","closed_at":"2025-12-30T11:11:08.517358+01:00","close_reason":"Eliminated 2 PathBuf clones per file in happy path. All 100 tests pass."}
{"id":"mssg-vh1.14","title":"Reduce excessive cloning in template rendering","description":"**Location:** `src/template.rs:56-122`\n\n**Issue:** Heavy cloning of `html`, `meta`, and other fields when building ContentItem for templates. The same 20+ lines of code were duplicated for building `contents` and `all_contents` lists.\n\n**Impact:** Code duplication, harder maintenance, and no single source of truth for ContentItem construction.\n\n## Fix\n\nExtracted a helper function `build_content_item()` that encapsulates the common logic:\n\n```rust\n/// Build a ContentItem from LoadedContent for template rendering.\nfn build_content_item(lc: \u0026crate::LoadedContent, config: \u0026Config) -\u003e ContentItem {\n    let filename = lc.output_path\n        .strip_prefix(\u0026config.site.output_dir)\n        .unwrap_or(\u0026lc.output_path)\n        .to_string_lossy()\n        .to_string();\n    let excerpt = get_excerpt_html(\u0026lc.content.data, \"## Context\");\n\n    ContentItem {\n        html: lc.html.clone(),\n        meta: lc.content.meta.clone(),\n        formatted_date: format_date_long(\u0026lc.content.meta.date),\n        filename,\n        content_type: lc.content_type.clone(),\n        excerpt,\n    }\n}\n```\n\nRefactored `render_index_from_loaded` to use the helper:\n\n```rust\nlet mut contents: Vec\u003cContentItem\u003e = loaded\n    .iter()\n    .map(|lc| build_content_item(lc, config))\n    .collect();\ncontents.sort_by(|a, b| b.meta.date.cmp(\u0026a.meta.date));\n\nlet mut all_contents: Vec\u003cContentItem\u003e = all_content\n    .iter()\n    .map(|lc| build_content_item(lc, config))\n    .collect();\nall_contents.sort_by(|a, b| b.meta.date.cmp(\u0026a.meta.date));\n```\n\n**Note:** The cloning is still necessary because minijinja requires owned values for serialization. However, this refactoring:\n- Eliminates 20+ lines of duplicate code\n- Provides single source of truth for ContentItem construction\n- Makes future optimization easier (e.g., caching ContentItems)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:35:36.177082+01:00","created_by":"l1x","updated_at":"2025-12-30T12:00:46.437742+01:00","closed_at":"2025-12-30T12:00:46.437742+01:00","close_reason":"Closed"}
{"id":"mssg-vh1.15","title":"Fix O(n²) string processing in syntax highlighting","description":"**Location:** `src/syntax.rs:154-227`\n\n**Original Issue:** Claimed O(n²) complexity due to re-scanning from beginning for each code block.\n\n## Analysis\n\n**The original assessment was incorrect.** The current implementation is already **O(n)**.\n\nThe `highlight_html` function uses a shrinking slice pattern:\n\n```rust\nlet mut remaining = html;\n\nwhile let Some(start_idx) = remaining.find(\"\u003cpre\u003e\u003ccode\") {\n    result.push_str(\u0026remaining[..start_idx]);  // Copy content before block\n    // ... process code block ...\n    remaining = \u0026remaining[block_end..];  // Slice off processed portion\n}\n\nresult.push_str(remaining);  // Copy any remaining content\n```\n\n**Why this is O(n):**\n1. `remaining` shrinks after each iteration via `\u0026remaining[block_end..]`\n2. `find()` only searches the unprocessed portion, not the full string\n3. Each character is scanned at most once and copied at most once\n\n**What O(n²) would look like (NOT what the code does):**\n```rust\nwhile let Some(idx) = html.find(\"\u003cpre\u003e\u003ccode\") {  // Always search FULL string\n    // This would re-scan already-processed portions\n}\n```\n\n## Resolution\n\nNo changes needed. The implementation is already optimally efficient for this approach.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:36:13.468214+01:00","created_by":"l1x","updated_at":"2025-12-30T12:08:25.093088+01:00","closed_at":"2025-12-30T12:08:25.093088+01:00","close_reason":"No changes needed - implementation is already O(n), not O(n²) as originally claimed"}
{"id":"mssg-vh1.16","title":"Add static file metadata caching","description":"**Location:** `src/output.rs:16-42`\n\n**Issue:** `fs::metadata()` called twice per file (source and dest) during static file copying.\n\n**Impact:** Significant I/O overhead for large static directories.\n\n**Fix:** Cache metadata or use single comparison syscall.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:36:13.618457+01:00","created_by":"l1x","updated_at":"2025-12-30T12:34:07.565549+01:00","closed_at":"2025-12-30T12:34:07.565549+01:00","close_reason":"Micro-optimization not worth implementing. The ticket misunderstands the code: metadata() is called on TWO DIFFERENT files (source and dest) - both are required for comparison. There's no redundancy. WalkDir could provide cached source metadata, but savings would be ~microseconds for typical sites. The real cost is file copying, which should_copy_file already optimizes by skipping unchanged files."}
{"id":"mssg-vh1.17","title":"Remove dead code: unused convert_content function","description":"**Location:** `src/content.rs:219`\n\n**Issue:** `convert_content()` is marked `#[allow(dead_code)]` and unused - superseded by `convert_content_with_highlighting()`.\n\n**Fix:** Remove the unused function.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T10:36:13.76764+01:00","created_by":"l1x","updated_at":"2025-12-30T12:15:17.070647+01:00","closed_at":"2025-12-30T12:15:17.070647+01:00","close_reason":"Removed unused convert_content() function and its 2 tests. Function was superseded by convert_content_with_highlighting(). Net -72 lines of dead code."}
{"id":"mssg-vh1.18","title":"Improve error handling in excerpt extraction","description":"**Location:** `src/content.rs:355-361`\n\n**Issue:** When excerpt markdown conversion fails, returns empty string with only a warning log.\n\n**Impact:** Users won't know their excerpts aren't being generated.\n\n**Fix:** Consider propagating error or making fallback behavior more explicit.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T10:36:13.919825+01:00","created_by":"l1x","updated_at":"2025-12-30T12:38:09.0692+01:00","closed_at":"2025-12-30T12:38:09.0692+01:00","close_reason":"Current behavior is appropriate. The tracing::warn! IS user notification - warnings are visible by default. Graceful degradation (empty excerpt) is correct for optional content - failing the entire build for one bad excerpt would be too aggressive. The only improvement would be adding file path to the warning, but that requires signature changes for an extremely rare edge case."}
{"id":"mssg-vh1.19","title":"Fix TOCTOU race condition in file copy","description":"**Location:** `src/output.rs:140-148`\n\n**Issue:** `exists()` check followed by `copy()` - file could be deleted between check and copy.\n\n**Fix:** Remove pre-check and handle error from `copy()` directly.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-30T10:36:27.424629+01:00","created_by":"l1x","updated_at":"2025-12-30T12:28:57.662553+01:00","closed_at":"2025-12-30T12:28:57.662553+01:00","close_reason":"Not a real bug - TOCTOU false positive. The exists() pre-check provides a clear error message ('Root static file not found') that would be lost if removed. In this context (single-threaded SSG building local files), the probability of a file being deleted between exists() and copy() is effectively zero. The pre-check is defensive programming that improves UX, not a vulnerability."}
{"id":"mssg-vh1.2","title":"Bump version to 0.9.0","description":"Update version in Cargo.toml from 0.8.1 to 0.9.0\n\nAcceptance Criteria:\n- [ ] Cargo.toml version = \"0.9.0\"\n- [ ] cargo build succeeds","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:42:47.405559+01:00","created_by":"l1x","updated_at":"2025-12-30T10:12:29.196797+01:00","closed_at":"2025-12-30T10:12:29.196797+01:00","close_reason":"Version bumped to 0.9.0, build succeeds"}
{"id":"mssg-vh1.20","title":"Add logging for silent content type fallback","description":"**Location:** `src/utils.rs:37-44`\n\n**Issue:** `get_content_type()` silently falls back to \"page\" via `.unwrap_or(\"page\")` with no logging.\n\n**Impact:** Misconfigurations go unnoticed.\n\n**Fix:** Add debug logging when fallback occurs.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T10:36:27.555711+01:00","created_by":"l1x","updated_at":"2025-12-30T12:36:06.625548+01:00","closed_at":"2025-12-30T12:36:06.625548+01:00","close_reason":"Not worth implementing - the fallback to 'page' is documented, intentional behavior for root-level content files (e.g., content/about.md → type 'page'). Adding debug logging would create noise for normal use. The only other fallback case (file outside content_dir) can't occur because find_markdown_files() only returns files from content_dir."}
{"id":"mssg-vh1.21","title":"Improve robustness of HTML parsing in syntax highlighter","description":"**Location:** `src/syntax.rs:172-227`\n\n**Issue:** Hand-coded HTML parsing assumes specific formats:\n- Expects double quotes for attributes\n- No handling of escaped quotes\n- Assumes `\u003c/code\u003e\u003c/pre\u003e` order\n\n**Impact:** Edge cases with non-standard HTML could break highlighting.\n\n**Fix:** Consider using a lightweight HTML parser or add more defensive parsing.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T10:36:27.687638+01:00","created_by":"l1x","updated_at":"2025-12-30T12:32:24.687427+01:00","closed_at":"2025-12-30T12:32:24.687427+01:00","close_reason":"Not a real issue - the HTML parser is designed for markdown-generated HTML only, which is predictable and consistent. The markdown crate (GFM) always produces: (1) double-quoted class attributes, (2) no escaped quotes in language identifiers, (3) \u003c/code\u003e\u003c/pre\u003e order. Using a full HTML parser would be over-engineering for this controlled input. All 10+ test cases confirm the expected format works correctly."}
{"id":"mssg-vh1.3","title":"Update README version history for 0.9.0","description":"Add v0.9.0 section to README.md version history with changelog:\n- Fixed missing mise tasks (verify, tests)\n- Added test coverage for content.rs edge cases\n- Reorganized mise.toml task structure\n- Fixed typos in documentation\n\nAcceptance Criteria:\n- [ ] v0.9.0 section added to README.md Version History\n- [ ] Date set to current date","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:42:47.517237+01:00","created_by":"l1x","updated_at":"2025-12-30T10:17:56.47761+01:00","closed_at":"2025-12-30T10:17:56.47761+01:00","close_reason":"Updated v0.9.0 changelog with all release changes","dependencies":[{"issue_id":"mssg-vh1.3","depends_on_id":"mssg-vh1.1","type":"blocks","created_at":"2025-12-29T23:43:00.648864+01:00","created_by":"daemon"},{"issue_id":"mssg-vh1.3","depends_on_id":"mssg-vh1.2","type":"blocks","created_at":"2025-12-29T23:43:00.741408+01:00","created_by":"daemon"}]}
{"id":"mssg-vh1.4","title":"Run full verification","description":"Run lint + tests to ensure release is stable\n\nAcceptance Criteria:\n- [ ] mise run verify passes\n- [ ] No warnings from clippy\n- [ ] All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:42:47.631169+01:00","created_by":"l1x","updated_at":"2025-12-30T16:45:05.346159+01:00","closed_at":"2025-12-30T16:45:05.346163+01:00","dependencies":[{"issue_id":"mssg-vh1.4","depends_on_id":"mssg-vh1.1","type":"blocks","created_at":"2025-12-29T23:43:00.555677+01:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"mssg-vh1.4","author":"l1x","text":"Verification completed successfully:\n\n✅ cargo clippy -- -D warnings - No warnings found\n✅ cargo test - All 98 tests passed (87 unit tests + 11 integration tests)\n\nThe release is stable and ready for tagging.","created_at":"2025-12-30T15:41:12Z"}]}
{"id":"mssg-vh1.5","title":"Create and push git tag v0.9.0","description":"Create annotated git tag and push to remote\n\nAcceptance Criteria:\n- [ ] git tag v0.9.0 created\n- [ ] Tag pushed to remote","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:42:47.751632+01:00","created_by":"l1x","updated_at":"2025-12-30T16:56:02.137505+01:00","closed_at":"2025-12-30T16:56:02.137507+01:00","dependencies":[{"issue_id":"mssg-vh1.5","depends_on_id":"mssg-vh1.3","type":"blocks","created_at":"2025-12-29T23:43:00.837912+01:00","created_by":"daemon"},{"issue_id":"mssg-vh1.5","depends_on_id":"mssg-vh1.4","type":"blocks","created_at":"2025-12-29T23:43:00.931362+01:00","created_by":"daemon"},{"issue_id":"mssg-vh1.5","depends_on_id":"mssg-vh1.6","type":"blocks","created_at":"2025-12-29T23:44:55.225581+01:00","created_by":"daemon"},{"issue_id":"mssg-vh1.5","depends_on_id":"mssg-vh1.10","type":"blocks","created_at":"2025-12-30T10:19:38.415393+01:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"mssg-vh1.5","author":"l1x","text":"Created and pushed git tag v0.9.0 successfully.\n\nTag details:\n- Tag name: v0.9.0\n- Type: Annotated tag\n- Commit: 452658a639920c8d1a241bb4e1ef69718a318623\n- Remote: Pushed to origin\n\nThe tag includes a comprehensive changelog documenting all changes in the 0.9.0 release:\n- Dependency migrations (chrono → time+kiters, basic-toml → toml)\n- Performance improvements (reduced cloning, O(n²) fixes)\n- Bug fixes (UTF-8 corruption, TOCTOU race condition, error handling)\n- Code quality improvements (test coverage, static file caching)\n- All 98 tests passing with no clippy warnings\n\nRelease is ready for deployment.","created_at":"2025-12-30T15:55:58Z"}]}
{"id":"mssg-vh1.6","title":"Migrate from chrono to time and kiters crates","description":"Replace chrono dependency with time and kiters crates for datetime handling.\n\n## Summary of Changes\n\n### Cargo.toml\n- Removed chrono dependency\n- Added kiters v0 for UTC timestamp formatting\n- Added time v0 with features: serde, serde-human-readable, parsing, formatting, macros\n- Updated tracing-subscriber to include env-filter and time features\n\n### Code Changes\n- **src/content.rs**: Migrated ContentMeta.date from DateTime\u003cFixedOffset\u003e to OffsetDateTime with RFC3339 serde\n- **src/sitemap.rs**: Updated format_url_entry to use time crate formatting\n- **src/utils.rs**: Updated add_date_prefix function to use time crate\n- **src/template.rs**: Added format_date_long() helper for date formatting\n- **src/main.rs**: Updated tracing initialization to use kiters::timestamp::get_utc_formatter()\n\n### Test Updates\n- All tests migrated to use time::macros::datetime!() macro\n- All 88 unit tests + 11 integration tests pass\n\nAcceptance Criteria:\n- [x] Remove chrono from Cargo.toml\n- [x] Add time and kiters dependencies\n- [x] Update all date/time handling code\n- [x] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T23:44:45.923147+01:00","created_by":"l1x","updated_at":"2025-12-30T00:30:29.39115+01:00","closed_at":"2025-12-30T00:30:29.391153+01:00"}
{"id":"mssg-vh1.7","title":"Benchmark basic-toml vs toml crate","description":"Compare performance of basic-toml (current) vs toml crate for config parsing.\n\n## Benchmark Results\n\n| Config Size | basic-toml | toml | Speedup |\n|-------------|------------|------|---------|\n| minimal | 5.52 µs | 2.85 µs | **1.94x** |\n| typical | 20.22 µs | 10.06 µs | **2.01x** |\n| large | 45.04 µs | 22.94 µs | **1.96x** |\n\n## Recommendation\n\nThe `toml` crate is consistently ~2x faster than `basic-toml` across all config sizes. Consider migrating to `toml` crate for better performance.\n\nNote: For a typical site config, we're talking about 20µs vs 10µs - both are fast enough that this won't be noticeable in practice. The difference becomes more relevant if parsing many TOML files.\n\n## Acceptance Criteria\n- [x] Benchmark code added to benches/\n- [x] Results documented with recommendation","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T00:29:08.887645+01:00","created_by":"l1x","updated_at":"2025-12-30T08:52:59.022761+01:00","closed_at":"2025-12-30T08:52:59.022766+01:00"}
{"id":"mssg-vh1.8","title":"Migrate from basic-toml to toml crate","description":"Replace basic-toml with toml crate for TOML parsing.\n\n## Rationale\n- basic-toml is **no longer maintained** (archived)\n- toml crate is ~2x faster (see benchmark mssg-vh1.7)\n- toml supports TOML 1.1 spec (basic-toml only 1.0)\n\n## Migration Guide\nSee docs/toml-migration.md for detailed comparison and steps.\n\n## Files to Modify\n- Cargo.toml (swap dependency)\n- src/config.rs (update error type, change basic_toml:: to toml::)\n- src/content.rs (change basic_toml:: to toml::)\n\n## Acceptance Criteria\n- [ ] basic-toml removed from dependencies\n- [ ] toml added to dependencies\n- [ ] All TOML parsing uses toml crate\n- [ ] All tests pass\n- [ ] Benchmarks still work (basic-toml in dev-dependencies)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T00:40:17.242715+01:00","created_by":"l1x","updated_at":"2025-12-30T08:44:51.061625+01:00","closed_at":"2025-12-30T08:44:51.061625+01:00","close_reason":"Migrated from basic-toml to toml crate. All 99 tests pass, benchmarks compile.","dependencies":[{"issue_id":"mssg-vh1.8","depends_on_id":"mssg-vh1.7","type":"blocks","created_at":"2025-12-30T00:40:23.241035+01:00","created_by":"daemon"}]}
{"id":"mssg-vh1.9","title":"Investigate 80MB release binary size","description":"The release binary is 80MB which seems large for a static site generator.\n\n## Current State\n- `target/release/marie-ssg` is 80MB\n- Release profile has size optimizations: `opt-level = \"s\"`, `lto = true`, `strip = \"symbols\"`, `panic = \"abort\"`\n\n## Investigation Findings\n\n### Binary Breakdown (Before)\n| Section | Size | Description |\n|---------|------|-------------|\n| `__const` | **74.3 MB** | Tree-sitter grammar parse tables |\n| `.text` | 7.1 MB | Actual executable code |\n| dSYM | 37 MB | Debug symbols (separate file) |\n\n### Root Cause\n`autumnus` crate includes **91 tree-sitter language grammars** by default. Each grammar embeds large parse tables as constant data.\n\n## Solution Applied\n\nUpdated Cargo.toml to use only documented languages (10 instead of 91):\n\n```toml\nautumnus = { version = \"0.7\", default-features = false, features = [\n    \"lang-bash\",\n    \"lang-css\",\n    \"lang-html\",\n    \"lang-javascript\",\n    \"lang-json\",\n    \"lang-python\",\n    \"lang-rust\",\n    \"lang-toml\",\n    \"lang-typescript\",\n    \"lang-yaml\",\n] }\n```\n\n## Results\n\n| Metric | Before | After | Reduction |\n|--------|--------|-------|-----------|\n| Binary size | 80 MB | 9 MB | **89%** |\n| `__const` section | 74.3 MB | 6.2 MB | **92%** |\n| Languages | 91 | 10 | **89%** |\n\nAll 99 tests pass.\n\n## Acceptance Criteria\n- [x] Identify top contributors to binary size\n- [x] Document findings\n- [x] Propose actionable optimizations if feasible\n- [x] Apply optimization - 89% size reduction achieved!","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T08:56:47.950454+01:00","created_by":"l1x","updated_at":"2025-12-30T09:39:47.685431+01:00","closed_at":"2025-12-30T09:39:47.685431+01:00","close_reason":"Reduced binary from 80MB to 9MB (89%) by limiting autumnus to 10 documented languages","dependencies":[{"issue_id":"mssg-vh1.9","depends_on_id":"mssg-vh1","type":"parent-child","created_at":"2025-12-30T08:56:47.95127+01:00","created_by":"daemon"}]}
{"id":"mssg-ylh","title":"Add header_uri_fragment config option for anchor links","description":"Add a site config option header_uri_fragment = true that generates anchor links for headers (h1-h6), enabling direct linking to sections via URL fragments (e.g., http://example.com/page.html#section-title). When enabled, each header should get an id attribute based on the header text (slugified).","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-05T19:44:57.30635+01:00","created_by":"l1x","updated_at":"2026-01-05T19:49:17.816415+01:00","deleted_at":"2026-01-05T19:49:17.816415+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"mssg-yo9","title":"Release 1.1.0","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2026-01-05T23:07:02.941391+01:00","created_by":"l1x","updated_at":"2026-01-06T10:05:37.524049+01:00"}
{"id":"mssg-yo9.1","title":"Add cover field and flexible extra fields to ContentMeta","description":"Add a cover field to ContentMeta for cover images, and add a flexible extra HashMap using serde flatten to allow arbitrary custom fields in .meta.toml files.\n\n## Implementation\n\n- `cover: Option\u003cString\u003e` with `#[serde(default)]` for cover images\n- `extra: HashMap\u003cString, String\u003e` with `#[serde(default, flatten)]` for arbitrary string fields\n\n## Acceptance Criteria\n\n- [ ] `cover` field added to ContentMeta with `#[serde(default)]`\n- [ ] `extra` HashMap\u003cString, String\u003e added with `#[serde(default, flatten)]`\n- [ ] Tests pass for cover field\n- [ ] Tests pass for extra fields\n- [ ] `mise run verify` passes (lint + tests)\n- [ ] Fields accessible in templates as `meta.cover` and `meta.extra.fieldname`","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T10:04:48.978834+01:00","created_by":"l1x","updated_at":"2026-01-06T10:25:26.632209+01:00","closed_at":"2026-01-06T10:25:26.632209+01:00","close_reason":"Implemented cover field and extra HashMap\u003cString, String\u003e with serde flatten. All 140 tests pass."}
{"id":"mssg-yo9.2","title":"Release 1.1.0 chores","description":"Release preparation tasks:\n\n1. Bump version in Cargo.toml to 1.1.0\n2. Update CHANGELOG/README with new features\n3. Run full test suite (mise run verify)\n4. Create git tag v1.1.0\n5. Push tag to remote","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-06T10:04:49.077439+01:00","created_by":"l1x","updated_at":"2026-01-06T10:27:41.159721+01:00","dependencies":[{"issue_id":"mssg-yo9.2","depends_on_id":"mssg-yo9.1","type":"blocks","created_at":"2026-01-06T10:04:56.53926+01:00","created_by":"l1x"}]}
{"id":"mssg-zku","title":"Syntax highlighter escaping bug: HTML entities rendered literally","description":"The markdown parser HTML-escapes content in code blocks (e.g., '\u003c' becomes '\u0026lt;'). The highlighter receives this escaped content and renders it literally, so code containing HTML shows '\u0026lt;' instead of '\u003c'.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-22T21:07:06.26345+01:00","updated_at":"2025-12-29T23:35:09.600228+01:00","close_reason":"Fixed by unescaping HTML entities (\u0026lt;, \u0026gt;, \u0026amp;, etc.) before passing code to the syntax highlighter","deleted_at":"2025-12-29T23:35:09.600228+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
